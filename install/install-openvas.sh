#!/bin/bash

# Add repo
sudo add-apt-repository ppa:mrazavi/openvas

# Update repositories
sudo apt-get update

# Install SQLite
sudo apt install sqlite3

# Install OpenVAS 9
sudo apt install openvas9

# Enable PDF reporting
sudo apt install texlive-latex-extra --no-install-recommends
sudo apt install texlive-fonts-recommended

# Additional needed packages
sudo apt install libopenvas9-dev

# check all good
sudo greenbone-nvt-sync
sudo greenbone-scapdata-sync
sudo greenbone-certdata-sync

# Restart OpenVAS Services
sudo systemctl restart openvas-scanner
sudo systemctl restart openvas-manager
sudo systemctl restart openvas-gsa
sudo systemctl enable openvas-scanner
sudo systemctl enable openvas-manager
sudo systemctl enable openvas-gsa

# Check all working
ps -aux | grep openvas
sudo openvasmd --rebuild --progress

